<h2 mat-dialog-title>Crear Usuario</h2>
<mat-divider/>
<form action="" [formGroup]="form" (ngSubmit)="onSubmit()">
    <mat-dialog-content class="mat-typography">

<!--        <div>-->
<!--            <mat-form-field appearance="outline">-->
<!--                <mat-label>id:</mat-label>-->
<!--                <input matInput type="text"-->
<!--                       formControlName="id"-->
<!--                       placeholder="id">-->
<!--                <mat-icon matSuffix fontIcon="id"></mat-icon>-->
<!--            </mat-form-field>-->

<!--        </div>-->

        <div>
            <mat-form-field appearance="outline">
                <mat-label>Name:</mat-label>
                <input matInput type="text"
                       formControlName="name"
                       placeholder="Ingrese su nombre">
                <mat-icon matSuffix fontIcon="id"></mat-icon>
                <mat-error>Field is required</mat-error>
            </mat-form-field>
        </div>

        <div>
            <mat-form-field appearance="outline">
                <mat-label>Email</mat-label>
                <input matInput
                       placeholder="Ingrese su email"
                       formControlName="email"
                       type="email">
                <mat-icon matSuffix fontIcon="person"/>
                <!--                <mat-error *ngIf="hasError('email')">{{ errorMessage('email') }}</mat-error>-->
            </mat-form-field>
        </div>

        <div formArrayName="addresses">
            <div style="display: flex; justify-content: space-between">
                <h3>Direcciones: </h3>
                <button mat-stroked-button type="button" (click)="addAddressField()">
                    <mat-icon fontIcon="add"></mat-icon>
                </button>
            </div>
            <div  *ngFor="let item of addresses.controls; let i = index">
                <div  [formGroupName]="i">
                    <div style="display: flex; gap: .5rem">
                        <mat-form-field class="example-full-width" style="flex: 1">
                            <mat-label>Distrito</mat-label>
                            <input type="email" matInput formControlName="district"
                                   placeholder="Distrito">
                            <mat-error >
                                El distrito es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field class="example-full-width" style="flex: 1" >
                            <mat-label>Calle</mat-label>
                            <input type="email" matInput formControlName="street"
                                   placeholder="Calle">
                            <mat-error >
                                La calle es <strong>requerida</strong>
                            </mat-error>
                        </mat-form-field>

                    </div>
                </div>
            </div>
        </div>

    </mat-dialog-content>
    <mat-divider/>
    <mat-dialog-actions align="end">
        <button mat-raised-button type="button" color="warn"
                mat-dialog-close (click)="onClose()">Cancel
        </button>
        <button mat-raised-button type="submit" [color]="action === 'update' ? 'accent': 'primary'"
                cdkFocusInitial >
            {{ (action) | titlecase }}
        </button>
    </mat-dialog-actions>
</form>
